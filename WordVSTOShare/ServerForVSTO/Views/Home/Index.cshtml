@*
    Request["pageIndex"]
    Request["search"]
    Request["Accessable"]
    Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=@ViewData["Accessable"]
*@

@using ModelAPI


@{
    int index = Convert.ToInt32(ViewData["pageIndex"]);
}
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div class="row-fluid">
                <div class="span6">
                    <div class="btn-group">
                        <button class="btn">模板分类</button> <button data-toggle="dropdown" class="btn dropdown-toggle"><span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=Public">公共模板</a>
                            </li>
                            <li>
                                <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=private">私有模板</a>
                            </li>
                            <li>
                                <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=protected">组织模板</a>
                            </li>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=Public">公共模板</a>
                                </li>
                                <li>
                                    <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=private">私有模板</a>
                                </li>
                                <li>
                                    <a href="Index?pageIndex=@ViewData["pageIndex"]&search=@ViewData["search"]&Accessable=protected">组织模板</a>
                                </li>
                            </ul>
                        </ul>
                    </div>
                </div>
                <div class="span6">
                    <form class="form-search" action="Index" method="get">
                        <input class="input-medium search-query" type="text" name="search" id="search" />
                        <input type="hidden" name="pageIndex" id="pageIndex" value="@index" />
                        <input type="hidden" name="Accessable" id="Accessable" value='@ViewData["Accessable"]' />
                        <button type="submit" class="btn">查找</button>
                    </form>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <ul class="thumbnails">
                        @{
                            IQueryable<WordTemplet> templets = (IQueryable<WordTemplet>)ViewData["Templets"];
                            int i = 0;
                            foreach (WordTemplet templet in templets)
                            {
                                if (i == 3)
                                {
                                    @MvcHtmlString.Create("</ul>")
                                    @MvcHtmlString.Create("<ul class='thumbnails'>")
                                }
                                <li class="span4">
                                    <div class="thumbnail">
                                        <img alt="300x200" src="@templet.ImagePath" />
                                        <div class="caption">
                                            <h3>
                                                @templet.TempletName
                                            </h3>
                                            <p>
                                                @templet.TempletIntroduction
                                            </p>
                                            <p>
                                                <a class="btn btn-primary" href="#">浏览</a> <a class="btn" href="#">分享</a>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                i++;
                            }
                        }
                    </ul>
                    <div class="pagination pagination-centered pagination-large">
                        <ul>
                            <li>
                                <a href="Index?pageIndex=@(index-1)&search=@ViewData["search"]&Accessable=@ViewData["Accessable"]">上一页</a>
                            </li>
                            @{
                                int count = (int)ViewData["pageCount"];
                                int j, k;
                                if (count < 10)
                                {
                                    j = 1; k = count;
                                }
                                else if (index < 7)
                                {
                                    j = 1; k = 10;
                                }
                                else if (index > count - 4)
                                {
                                    j = count - 9; k = count;
                                }
                                else
                                {
                                    j = index - 5; k = index + 4;
                                }
                                {
                                    for (i = j; i <= k; i++)
                                    {
                                        <li>
                                            <a href="Index?pageIndex=@i&search=@ViewData["search"]&Accessable=@ViewData["Accessable"]">@i</a>
                                        </li>
                                    }
                                }
                            }
                            <li>
                                <a href="Index?pageIndex=@((index+1)<=count?index+1:count)&search=@ViewData["search"]&Accessable=@ViewData["Accessable"]">下一页</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>			





<a id="modal-163521" href="#modal-container-163521" role="button" class="btn" data-toggle="modal">触发遮罩窗体</a>
<div id="modal-container-163521" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">
            标题栏
        </h3>
    </div>
    <div class="modal-body">
        <p>
            显示信息
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button> <button class="btn btn-primary">保存设置</button>
    </div>
</div>